在ER图的基础上，考虑将M:N的关系设计成关系模式，将1：N的关系归入N方的实体设计成关系模式，可以得到的关系模式有：

l 用户表

l 店铺表

l 店铺图书关系表

l 图书表

l 订单表

l 图书订单关系表

 

考虑数据库的逻辑设计，为满足第三范式或BC范式，需要减少冗余。

 

考虑数据库的物理设计，对子类的处理方式是使用单个表，因为不牵涉查询链接等；因为订单常常需要查询总价格，将总价格加入订单图书关系表（订单详情表）；为了满足搜索图书的需求，加入book_onsale表。

 

关于索引设计：我们的基本功能涉及的全部查询几乎都可以靠主键完成，因此不另外设置索引。但是附加功能搜索图书需要建立索引加快查询，在book_onsale表中为title,author,tag字段添加辅助索引。